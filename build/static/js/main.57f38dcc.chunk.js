(this["webpackJsonpmoto-device-front"]=this["webpackJsonpmoto-device-front"]||[]).push([[0],{36:function(e,t,c){},54:function(e,t,c){},55:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},83:function(e,t,c){},84:function(e,t,c){},86:function(e,t,c){},87:function(e,t,c){},88:function(e,t,c){},89:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){},93:function(e,t,c){},95:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),i=c(23),a=c.n(i),r=c(4),l=(c(54),c(7)),o=(c(55),c(8)),u=(c(36),c(10)),j=c(19),d=c(20),b=c(6),h=function(){function e(){Object(j.a)(this,e),this._pki={},Object(b.d)(this)}return Object(d.a)(e,[{key:"setAllPki",value:function(e){this._pki=Object(u.a)(Object(u.a)({},this._pki),e)}},{key:"allPki",get:function(){return this._pki}},{key:"getOnePki",value:function(e){return this._pki[e]}}]),e}(),O=Object(n.createContext)(),p=c(0);var x=function(){var e=Object(o.j)().path;return Object(p.jsx)("section",{className:"my-room",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h2",{className:"my-room__title",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"}),Object(p.jsx)("div",{className:"my-room__inner",children:Object(p.jsx)(O.Provider,{value:{pki:new h},children:Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{exact:!0,path:e,children:Object(p.jsx)(v,{})}),re[0].routes.map((function(e){return Object(p.jsx)(o.b,{path:e.path,component:e.component},e.path)}))]})})})]})})};function v(){var e=Object(o.j)().url;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0434\u0438\u043d \u0438\u0437 \u043f\u0443\u043d\u043a\u0442\u043e\u0432"}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{to:"".concat(e,"/device"),children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"})}),Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{to:"".concat(e,"/pki"),children:"\u041f\u041a\u0418"})}),Object(p.jsx)("li",{children:Object(p.jsx)(r.b,{to:"".concat(e,"/graph"),children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"})})]})]})}c(61);var m=function(){return Object(p.jsx)("section",{className:"main",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"main__inner",children:[Object(p.jsx)("h1",{children:"Moto-device"}),Object(p.jsx)("h3",{children:"\u041f\u0440\u043e\u043a\u0430\u0447\u0430\u0439 \u0441\u0432\u043e\u0439 \u0431\u0430\u0439\u043a!"}),Object(p.jsxs)("div",{className:"main__description",children:[Object(p.jsx)("p",{children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c\u044b\u0445 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432, \u0438\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b \u0438 \u0434\u043e\u0441\u0442\u043e\u0438\u043d\u0441\u0442\u0432\u0430."}),Object(p.jsxs)("div",{className:"main__links",children:[Object(p.jsx)(r.b,{to:"/shop",children:"\u041a\u0443\u043f\u0438\u0442\u044c"}),Object(p.jsx)(r.b,{to:"/device",children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"})]})]})]})})})},f=function(){function e(){Object(j.a)(this,e),this._devices={},Object(b.d)(this)}return Object(d.a)(e,[{key:"setAllDevices",value:function(e){this._devices=e}},{key:"setDevice",value:function(e,t){this._devices[e]=t}},{key:"allDevices",get:function(){return this._devices}},{key:"getDevice",value:function(e){return this._devices[e]}}]),e}(),_=Object(n.createContext)(),k=c(9),g=(c(62),Object(k.a)((function(){var e=Object(n.useContext)(_).devices;return Object(p.jsx)("section",{className:"devices",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"devices__inner",children:[Object(p.jsx)("h2",{children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),Object.values(e.allDevices).map((function(e,t){var c=e.name,n=e.id,s=e.img,i=e.descriptionShort;return Object(p.jsxs)("div",{className:"devices__item",children:[Object(p.jsx)("div",{className:"devices__image",children:Object(p.jsx)("img",{src:"https://moto-devices.herokuapp.com//"+s,alt:"device"})}),Object(p.jsxs)("div",{className:"devices__description",children:[Object(p.jsx)("h3",{children:c}),Object(p.jsx)("p",{children:i}),Object(p.jsx)(r.b,{to:"/device/".concat(n),children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})]})]},t)}))]})})})}))),N=(c(63),Object(n.createContext)()),y=c(3),w=c.n(y),C=c(5),D=c(35),S=c.n(D),z=S.a.create({baseURL:"https://moto-devices.herokuapp.com/"}),A=S.a.create({baseURL:"https://moto-devices.herokuapp.com/"});A.interceptors.request.use((function(e){return e.headers.authorization="Bearer ".concat(localStorage.getItem("token")),e}));var B=function(){var e=Object(C.a)(w.a.mark((function e(t){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("api/device",t,{headers:{"Content-Type":"multipart/form-data"}});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(C.a)(w.a.mark((function e(t,c){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.put("api/device/".concat(t),c,{headers:{"Content-Type":"multipart/form-data"}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),M=function(){var e=Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("api/device");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(C.a)(w.a.mark((function e(t){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("api/device/".concat(t));case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(C.a)(w.a.mark((function e(t){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.delete("api/device/".concat(t));case 2:return c=e.sent.status,e.abrupt("return",c.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=Object(k.a)((function(){var e=Object(n.useContext)(N),t=e.addToCart,c=e.buyNow,s=Object(n.useContext)(_).devices,i=Object(o.i)().id,a=Object(n.useState)({props:[]}),r=Object(l.a)(a,2),u=r[0],j=r[1];return Object(n.useEffect)((function(){I(i).then((function(e){j(e),s.setDevice(e.id,e)}))}),[]),Object(p.jsx)("section",{className:"device",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"device__inner",children:[Object(p.jsx)("h2",{children:u.name}),Object(p.jsx)("img",{src:"https://moto-devices.herokuapp.com//"+u.img,alt:"device"}),Object(p.jsx)("p",{children:u.descriptionFull}),Object(p.jsxs)("table",{className:"device__props",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430"}),Object(p.jsx)("th",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435"})]})}),Object(p.jsx)("tbody",{children:Object.values(u.props).map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:e.title}),Object(p.jsx)("td",{children:e.prop})]},t)}))})]}),Object(p.jsxs)("p",{children:[" \u0412 \u043d\u0430\u043b\u0438\u0447\u0438\u0438: ",u.inStock," \u0448\u0442."]}),Object(p.jsxs)("p",{children:[" \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",u.price," \u0440\u0443\u0431."]}),Object(p.jsxs)("div",{className:"device__links",children:[Object(p.jsx)("button",{type:"button",onClick:function(){return c(u.id)},children:"\u041a\u0443\u043f\u0438\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441"}),Object(p.jsx)("button",{type:"button",onClick:function(){return t(u.id)},children:"\u0412 \u041a\u043e\u0440\u0437\u0438\u043d\u0443"})]})]})})})})),V=(c(83),c(22)),L=function(){function e(){Object(j.a)(this,e),this._devices=[],Object(b.d)(this)}return Object(d.a)(e,[{key:"saveInBasket",value:function(e){this._devices=[].concat(Object(V.a)(this._devices),[{id:e,count:1}])}},{key:"deleteFromBasket",value:function(e){this._devices=this._devices.filter((function(t){return t.id!==e}))}},{key:"clearBasket",value:function(){this._devices=[]}},{key:"countInc",value:function(e){this._devices[e].count++}},{key:"countDec",value:function(e){this._devices[e].count--}},{key:"allDevices",get:function(){return this._devices}}]),e}(),U=Object(n.createContext)(),J=c(24),R=c.n(J);c(84);var T=function(e){var t=e.children,c=e.item;return Object(p.jsxs)("div",{className:"card-h",children:[Object(p.jsx)("div",{className:"card-h__image",children:Object(p.jsx)("img",{src:"https://moto-devices.herokuapp.com//"+c.img,alt:"device"})}),Object(p.jsx)("div",{className:"card-h__header",children:Object(p.jsx)("h3",{className:"card-h__title",children:c.name})}),Object(p.jsxs)("div",{className:"card-h__body",children:[Object(p.jsx)("p",{children:c.descriptionShort}),Object(p.jsxs)("p",{children:["\u0412 \u043d\u0430\u043b\u0438\u0447\u0438\u0438: ",c.inStock," \u0448\u0442."]}),Object(p.jsxs)("p",{children:[" \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",c.price," \u0440\u0443\u0431."]})]}),Object(p.jsx)("div",{className:"card-h__footer",children:t})]})},q=function(){function e(){Object(j.a)(this,e),this._isAuth=!1,this._user={},Object(b.d)(this)}return Object(d.a)(e,[{key:"setIsAuth",value:function(e){this._isAuth=e}},{key:"setUser",value:function(e){this._user=Object(u.a)(Object(u.a)({},this._user),e)}},{key:"isAuth",get:function(){return this._isAuth}},{key:"user",get:function(){return this._user}},{key:"isAdmin",get:function(){return this._user.role&&"ADMIN"===this._user.role}}]),e}(),K=Object(n.createContext)(),G=function(){var e=Object(C.a)(w.a.mark((function e(t){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("api/statistics",t);case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=Object(k.a)((function(){var e=Object(n.useContext)(U).basket,t=Object(n.useContext)(_).devices,c=Object(n.useContext)(K).user,s=Object(n.useContext)(N).openModal,i=Object(n.useState)(!e.allDevices.length),a=Object(l.a)(i,2),o=a[0],u=(a[1],e.allDevices.reduce((function(e,c){return c.count*t.allDevices[c.id].price+e}),0)),j=e.allDevices.reduce((function(e,t){return e+t.count}),0),d=function(t,c){var n=e.allDevices.findIndex((function(e){return e.id===t}));switch(c){case"minus":e.countDec(n);break;case"plus":e.countInc(n)}},b=function(){e.clearBasket()},h=function(){var n=Object(C.a)(w.a.mark((function n(){var s,i;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(s={user_id:c.user.id,devices:e.allDevices}).devices.forEach((function(e){return e.info=t.getDevice(e.id)})),n.next=4,G(s);case 4:200===(i=n.sent).status&&b(),console.log("\u041f\u043e\u043a\u0443\u043f\u043a\u0430",i);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(p.jsx)("section",{className:"basket",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h2",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),o&&Object(p.jsxs)("p",{children:["\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u043f\u043e\u043a\u0430 \u043d\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u043e\u0432! ",Object(p.jsx)(r.b,{to:"/shop",children:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440"})]}),!o&&Object(p.jsxs)("div",{className:"basket__container",children:[Object(p.jsxs)("aside",{className:"basket__menu",children:[Object(p.jsxs)("div",{className:"info",children:[Object(p.jsx)("h3",{className:"info__title",children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 "}),Object(p.jsxs)("p",{className:"info__text",children:[j," \u0442\u043e\u0432\u0430\u0440\u043e\u0432"]}),Object(p.jsxs)("p",{className:"info__text",children:["\u041a \u043e\u043f\u043b\u0430\u0442\u0435: ",u," \u0440\u0443\u0431\u043b\u0435\u0439"]}),c.isAuth?Object(p.jsx)("button",{onClick:h,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c"}):Object(p.jsx)("button",{onClick:function(){return s("login")},children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(p.jsx)("button",{className:"basket__btn",onClick:b,children:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]}),Object(p.jsx)("div",{className:"basket__goods",children:e.allDevices.map((function(c,n){return Object(p.jsxs)(T,{item:t.getDevice(c.id),children:[Object(p.jsxs)("div",{className:"options",children:[Object(p.jsx)("label",{htmlFor:"count",children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"}),Object(p.jsxs)("div",{className:"options__control",children:[Object(p.jsx)("button",{className:"options__btn",onClick:function(){return d(c.id,"minus")},disabled:c.count<2,children:"-"}),Object(p.jsx)("output",{name:"count",children:c.count}),Object(p.jsx)("button",{className:"options__btn",onClick:function(){return d(c.id,"plus")},disabled:c.count===c.inStock,children:"+"})]})]}),Object(p.jsx)(R.a,{className:"icon-button",onClick:function(){return t=c.id,void e.deleteFromBasket(t);var t}})]},n)}))})]})]})})})),Q=(c(86),Object(k.a)((function(){var e=Object(n.useContext)(_).devices,t=Object(n.useContext)(U).basket,c=Object(o.g)(),s=function(e){return t.allDevices.some((function(t){return t.id===e}))},i=function(e){!s(e)&&t.saveInBasket(e)},a=function(e){i(e),c.push("/basket")};return Object(p.jsx)("section",{className:"shop",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"shop__inner",children:[Object(p.jsx)("h2",{children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"}),Object(p.jsxs)("div",{className:"shop__container",children:[Object(p.jsx)("aside",{className:"shop__menu",children:Object(p.jsxs)("div",{className:"filter",children:[Object(p.jsx)("h3",{children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}),Object(p.jsxs)("form",{name:"filter",className:"filter__form",children:[Object(p.jsx)("input",{type:"text",name:"query",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u044e"}),Object(p.jsxs)("div",{className:"filter__group",children:[Object(p.jsx)("label",{htmlFor:"inStock",children:"\u0412 \u043d\u0430\u043b\u0438\u0447\u0438\u0438"}),Object(p.jsx)("input",{type:"checkbox",id:"inStock"})]}),Object(p.jsx)("button",{type:"submit",children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"})]})]})}),Object(p.jsx)("div",{className:"shop__goods",children:Object.values(e.allDevices).map((function(e,t){return Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("div",{className:"card__image",children:Object(p.jsx)("img",{src:"https://moto-devices.herokuapp.com//"+e.img,alt:"device"})}),Object(p.jsx)("div",{className:"card__header",children:Object(p.jsx)("h3",{className:"card__title",children:e.name})}),Object(p.jsxs)("div",{className:"card__body",children:[Object(p.jsx)("p",{children:e.descriptionShort}),Object(p.jsx)("p",{children:Object(p.jsx)(r.b,{to:"/device/".concat(e.id),children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"})}),Object(p.jsxs)("p",{children:["\u0412 \u043d\u0430\u043b\u0438\u0447\u0438\u0438: ",e.inStock," \u0448\u0442."]}),Object(p.jsxs)("p",{children:[" \u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c: ",e.price," \u0440\u0443\u0431."]})]}),Object(p.jsx)("div",{className:"card__footer",children:Object(p.jsxs)("div",{className:"card__btns",children:[Object(p.jsx)("button",{onClick:function(){return a(e.id)},children:"\u041a\u0443\u043f\u0438\u0442\u044c \u0441\u0435\u0439\u0447\u0430\u0441"}),Object(p.jsxs)("button",{onClick:function(){return s(e.id)?a(e.id):i(e.id)},children:[s(e.id)?"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 ":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "," \u0432 \u041a\u043e\u0440\u0437\u0438\u043d\u0443"]})]})})]},t)}))})]})]})})})}))),W=function(){var e=Object(C.a)(w.a.mark((function e(){var t;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.get("api/pki");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(C.a)(w.a.mark((function e(t){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.delete("api/pki/".concat(t));case 2:return c=e.sent.status,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(C.a)(w.a.mark((function e(t){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("api/pki",t);case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=c(47),$=c.n(Z),ee=Object(k.a)((function(){var e=Object(n.useContext)(N),t=e.isOpenModal,c=e.openModal,s=e.setMessage,i=e.dialogResult,a=Object(n.useContext)(_).devices,u=Object(n.useContext)(O).pki,j=Object(n.useState)(""),d=Object(l.a)(j,2),b=d[0],h=d[1],x=Object(o.g)();Object(n.useEffect)((function(){W().then((function(e){var t=e.reduce((function(e,t){return e[t.name]=t,e}),{});u.setAllPki(t)}))}),[]),Object(n.useEffect)((function(){M().then((function(e){var t={};e.forEach((function(e){t[e.id]=e})),a.setAllDevices(t)}))}),[t]),Object(n.useEffect)((function(){"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"===i&&P(b).then((function(e){200===e&&(s({title:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",text:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e",cancel:"",ok:"OK"}),c("mess"))}))}),[i]);return Object(p.jsxs)("div",{className:"stock",children:[Object(p.jsx)("h4",{className:"stock__title",children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"}),Object(p.jsx)(r.b,{to:"/lk",children:"\u041d\u0430\u0437\u0430\u0434"}),Object(p.jsx)("div",{className:"stock__devices",children:Object.values(a.allDevices).map((function(e){return Object(p.jsxs)(T,{item:e,children:[Object(p.jsx)(R.a,{className:"icon-button",onClick:function(){return t=e.id,n=e.name,s({title:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!",text:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c ".concat(n," ?"),cancel:"\u041e\u0442\u043c\u0435\u043d\u0430",ok:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),h(t),void c("mess");var t,n}}),Object(p.jsx)($.a,{className:"icon-button",onClick:function(){return t=e.id,void x.push("/lk/addDevice/"+t);var t}})]},e.id)}))}),Object(p.jsx)("div",{className:"stock__add",children:Object(p.jsx)("button",{className:"stock__btn",onClick:function(){x.push("/lk/addDevice")},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e"})})]})})),te=c(21),ce=Object(k.a)((function(){var e=Object(n.useContext)(N),t=e.openModal,c=e.setMessage,s=e.dialogResult,i=Object(n.useState)(""),a=Object(l.a)(i,2),j=a[0],d=a[1],b=Object(n.useState)([]),h=Object(l.a)(b,2),O=h[0],x=h[1],v=Object(o.g)();Object(n.useEffect)((function(){W().then((function(e){e.forEach((function(e){return e.disabled=!0})),x(e)}))}),[]),Object(n.useEffect)((function(){"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"===s&&X(j).then((function(e){200===e&&(c({title:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e",text:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u044e\u0449\u0435\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u043e",cancel:"",ok:"OK"}),x(O.filter((function(e){return e.id!==j}))),t("mess"))}))}),[s]);var m=function(){var e=Object(C.a)(w.a.mark((function e(t){var c,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=O.filter((function(e){return""!==e.name})),(n=new FormData).append("data",JSON.stringify(c)),e.next=6,Y(n);case 6:t.target.reset(),v.push("/lk");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(e,t,c){x(O.map((function(n){return n.id===c?Object(u.a)(Object(u.a)({},n),{},Object(te.a)({},e,t)):n})))};return Object(p.jsxs)("div",{className:"stock",children:[Object(p.jsx)("h4",{className:"stock__title",children:"\u041f\u041a\u0418"}),Object(p.jsx)(r.b,{to:"/lk",children:"\u041d\u0430\u0437\u0430\u0434"}),Object(p.jsx)("div",{className:"stock__pki",children:Object(p.jsxs)("form",{className:"table",onSubmit:m,children:[Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u044e\u0449\u0438\u0435"}),Object(p.jsxs)("div",{className:"table__head",children:[Object(p.jsx)("p",{children:"\u2116"}),Object(p.jsx)("p",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),Object(p.jsx)("p",{children:"\u0421\u0440\u043e\u043a \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438, \u0434\u043d\u0435\u0439"}),Object(p.jsx)("p",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e, \u0448\u0442"})]}),Object(p.jsx)("ol",{children:O.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsxs)("div",{className:"table__row",children:[Object(p.jsx)("input",{type:"text",name:"name",defaultValue:e.name,onBlur:function(t){var c=t.target.value.trim();t.target.value=c,f("name",c,e.id)},disabled:e.disabled}),Object(p.jsx)("input",{type:"text",name:"deliver",defaultValue:e.deliver,onBlur:function(t){var c=t.target.value.trim();t.target.value=c,f("deliver",c,e.id)},disabled:e.disabled}),Object(p.jsx)("input",{type:"number",name:"value",defaultValue:e.value,min:"0",onBlur:function(t){var c=parseInt(t.target.value,10);t.target.value=c,f("value",c,e.id)},disabled:e.disabled}),Object(p.jsx)("button",{type:"button",onClick:function(){return function(e){var t=O.map((function(t){return t.id===e?Object(u.a)(Object(u.a)({},t),{},{disabled:!1}):t}));x(t)}(e.id)},children:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"}),Object(p.jsx)(R.a,{className:"icon-button",onClick:function(){return n=e.id,s=e.name,c({title:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!",text:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c ".concat(s," ?"),cancel:"\u041e\u0442\u043c\u0435\u043d\u0430",ok:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),d(n),void t("mess");var n,s}})]})},e.name+e.id)}))}),Object(p.jsx)("div",{className:"table__add",children:Object(p.jsx)("button",{className:"stock__btn",type:"button",onClick:function(){x([].concat(Object(V.a)(O),[{name:"",deliver:"",value:0,id:new Date}]))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u044e\u0449\u0435\u0435"})})]}),Object(p.jsx)("div",{className:"table__save",children:Object(p.jsx)("button",{className:"stock__btn",type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})]})})),ne=function(){return Object(p.jsxs)("div",{className:"stock",children:[Object(p.jsx)("h4",{className:"stock__title",children:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"}),Object(p.jsx)(r.b,{to:"/lk",children:"\u041d\u0430\u0437\u0430\u0434"}),Object(p.jsx)("p",{children:"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430"})]})},se=(c(87),Object(k.a)((function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),c=t[0],s=t[1],i=Object(n.useState)([]),a=Object(l.a)(i,2),r=a[0],j=a[1],d=Object(n.useState)([]),b=Object(l.a)(d,2),h=b[0],x=b[1],v=Object(o.i)().id,m=Object(n.useContext)(O).pki;m.allPki;Object(n.useEffect)((function(){v&&I(v).then((function(e){s(e),e.props.length&&j(e.props),e.pki.length&&x(e.pki)})),W().then((function(e){var t=e.reduce((function(e,t){return e[t.name]=t,e}),{});m.setAllPki(t)}))}),[]);var f=Object(o.g)(),_=function(){var e=Object(C.a)(w.a.mark((function e(t){var c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=new FormData(t.target),r.length&&c.append("props",JSON.stringify(r)),h.length&&c.append("pki",JSON.stringify(h)),e.prev=4,!v){e.next=10;break}return e.next=8,F(v,c);case 8:e.next=12;break;case 10:return e.next=12,B(c);case 12:t.target.reset(),f.push("/lk/device"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e,t,c){j(r.map((function(n){return n.id===c?Object(u.a)(Object(u.a)({},n),{},Object(te.a)({},e,t)):n})))},g=function(e,t,c){x(h.map((function(n){return n.id===c?Object(u.a)(Object(u.a)({},n),{},Object(te.a)({},e,t)):n})))};return Object(p.jsx)("div",{className:"info-device",children:Object(p.jsxs)("form",{name:"deviceInfo",className:"info-device__form",onSubmit:_,children:[Object(p.jsxs)("fieldset",{children:[Object(p.jsxs)("div",{className:"info-device__group",children:[Object(p.jsx)("label",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:"}),Object(p.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:c.name})]}),Object(p.jsxs)("div",{className:"info-device__group",children:[Object(p.jsx)("label",{children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c:"}),Object(p.jsx)("input",{type:"number",id:"price",name:"price",defaultValue:c.price})]})]}),Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"}),Object(p.jsx)("label",{children:"\u041f\u043e\u043b\u043d\u043e\u0435:"}),Object(p.jsx)("textarea",{type:"text",rows:"4",id:"descriptionFull",name:"descriptionFull",defaultValue:c.descriptionFull}),Object(p.jsx)("label",{children:"\u041a\u0440\u0430\u0442\u043a\u043e\u0435:"}),Object(p.jsx)("textarea",{type:"text",rows:"2",id:"descriptionShort",name:"descriptionShort",defaultValue:c.descriptionShort})]}),Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("label",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435:"}),Object(p.jsx)("input",{type:"file",id:"image",name:"image"})]}),Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0438"}),Object(p.jsx)("button",{type:"button",onClick:function(){j([].concat(Object(V.a)(r),[{title:"",prop:"",id:new Date}]))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0443"}),r.map((function(e){var t=e.title,c=e.prop,n=e.id;return Object(p.jsxs)("div",{className:"propsline",children:[Object(p.jsxs)("div",{className:"propsline__group",children:[Object(p.jsx)("label",{children:"\u0425\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430:"}),Object(p.jsx)("input",{type:"text",name:"title",defaultValue:t,onBlur:function(e){var t=e.target.value.trim();k("title",t,n),e.target.value=t}})]}),Object(p.jsxs)("div",{className:"propsline__group",children:[Object(p.jsx)("label",{children:"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435:"}),Object(p.jsx)("input",{type:"text",name:"prop",defaultValue:c,onBlur:function(e){var t=e.target.value.trim();e.target.value=t,k("prop",t,n)}})]}),Object(p.jsx)("button",{className:"propsline__btn",onClick:function(){return e=n,void j(r.filter((function(t){return t.id!==e})));var e},type:"button",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},n)}))]}),Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("legend",{children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u044e\u0449\u0438\u0435"}),Object(p.jsx)("button",{type:"button",onClick:function(){x([].concat(Object(V.a)(h),[{name:"",value:"",id:new Date}]))},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043f\u0435\u043b\u043a\u0442\u0443\u044e\u0449\u0435\u0435"}),h.map((function(e){var t=e.name,c=e.value,n=e.id;return Object(p.jsxs)("div",{className:"propsline",children:[Object(p.jsxs)("div",{className:"propsline__group",children:[Object(p.jsx)("label",{children:"\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0443\u044e\u0449\u0435\u0435:"}),Object(p.jsx)("select",{name:"pki_name",defaultValue:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0443\u043d\u043a\u0442 \u043c\u0435\u043d\u044e",onChange:function(e){return g("name",e.target.value,n)},children:Object.keys(m.allPki).map((function(e){return Object(p.jsx)("option",{value:e,selected:e===t,children:e})}))})]}),Object(p.jsxs)("div",{className:"propsline__group",children:[Object(p.jsx)("label",{children:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e:"}),Object(p.jsx)("input",{type:"number",min:"1",name:"value",defaultValue:c,onBlur:function(e){var t=e.target.value.trim();e.target.value=t,g("value",t,n)}})]}),Object(p.jsx)("button",{className:"propsline__btn",onClick:function(){return e=n,void x(h.filter((function(t){return t.id!==e})));var e},type:"button",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]},"".concat(t).concat(n))}))]}),Object(p.jsx)("button",{type:"submit",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})})}))),ie=function(){var e=Object(o.j)("/lk/addDevice/:id");return Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)("h4",{className:"stock__title",children:e?"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430":"\u041d\u043e\u0432\u043e\u0435 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u043e"}),Object(p.jsx)(r.b,{to:"/lk/device",children:"\u041d\u0430\u0437\u0430\u0434"}),Object(p.jsxs)(o.d,{children:[Object(p.jsx)(o.b,{path:"/lk/addDevice",exact:!0,children:Object(p.jsx)(se,{})}),Object(p.jsx)(o.b,{path:"/lk/addDevice/:id",children:Object(p.jsx)(se,{})})]})]})},ae=[{path:"/",component:m},{path:"/device",component:g},{path:"/device/:id",component:E},{path:"/shop",component:Q},{path:"/basket",component:H}],re=[{path:"/lk",component:x,routes:[{path:"/lk/device",component:ee},{path:"/lk/addDevice",component:ie},{path:"lk/addDevice/:id",component:ie},{path:"/lk/pki",component:ce},{path:"/lk/graph",component:ne}]}];c(88),c(89);var le=function(){var e=Object(n.useContext)(K).user,t=e.isAdmin;return Object(p.jsxs)("div",{className:"user",children:[Object(p.jsx)("p",{className:"user__name",children:e.user.email}),t&&Object(p.jsx)(r.b,{className:"user__link",to:"/lk",children:"\u041b\u041a"}),Object(p.jsx)("button",{className:"user__logout",onClick:function(){e.setUser({}),e.setIsAuth(!1),localStorage.removeItem("token")},children:"\u0412\u044b\u0439\u0442\u0438"})]})},oe=(c(90),c(48)),ue=c.n(oe),je=Object(k.a)((function(){var e=Object(o.h)().pathname,t=Object(n.useContext)(U).basket;return Object(p.jsxs)("ul",{className:"nav",children:[Object(p.jsx)("li",{className:"/"===e?"nav__active":"",children:Object(p.jsx)(r.b,{to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(p.jsx)("li",{className:"/device"===e?"nav__active":"",children:Object(p.jsx)(r.b,{to:"/device",children:"\u0423\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"})}),Object(p.jsx)("li",{className:"/shop"===e?"nav__active":"",children:Object(p.jsx)(r.b,{to:"/shop",children:"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"})}),Object(p.jsx)("li",{className:"/basket"===e?"nav__active":"",children:Object(p.jsxs)(r.b,{to:"/basket",children:[Object(p.jsx)(ue.a,{}),!!t.allDevices.length&&t.allDevices.length]})})]})})),de=Object(k.a)((function(e){var t=e.openLogin,c=Object(n.useContext)(K).user.isAuth;return Object(p.jsx)("header",{className:"header",children:Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"header__inner",children:[Object(p.jsx)("div",{className:"header__logo",children:Object(p.jsx)(be,{})}),Object(p.jsx)("div",{className:"header__nav",children:Object(p.jsx)(je,{})}),Object(p.jsxs)("div",{className:"header__user",children:[c&&Object(p.jsx)(le,{}),!c&&Object(p.jsx)("button",{className:"header__login",onClick:function(){return t("login")},children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})}));function be(){return Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)("svg",{id:"Layer_1",enableBackground:"new 0 0 511.982 511.982",height:"40",viewBox:"0 0 511.982 511.982",width:"40",xmlns:"http://www.w3.org/2000/svg",children:Object(p.jsx)("g",{children:Object(p.jsxs)("g",{children:[Object(p.jsx)("path",{d:"m493.606 82.526-53.556-28.539c-6.543-3.485-11.585-5.919-19.482-8.793-7.906-2.877-13.331-4.253-20.577-5.786l-59.369-12.564c-16.638-3.521-31.895 4.011-37.102 18.316l-10.26 28.192c-1.889 5.189.787 10.928 5.977 12.816l5.593 2.036-4.929 19.352c-12.997-7.295-27.974-11.463-43.909-11.463s-30.913 4.168-43.91 11.464l-4.929-19.352 5.592-2.035c2.492-.906 4.522-2.767 5.643-5.17 1.121-2.404 1.241-5.154.334-7.646l-10.261-28.194c-5.207-14.306-20.464-21.839-37.102-18.316l-59.368 12.564c-7.247 1.533-12.672 2.91-20.577 5.786-7.897 2.875-12.939 5.309-19.482 8.794l-53.555 28.538c-15.01 7.997-21.855 23.574-16.648 37.878l10.261 28.191c1.478 4.062 5.313 6.583 9.398 6.583 1.135 0 2.291-.195 3.419-.605l5.592-2.035 8.744 18.16c-4.55 2.211-6.784 7.55-5.015 12.408 1.478 4.062 5.313 6.583 9.398 6.583 1.135 0 2.291-.195 3.419-.605l.893-.325 8.744 18.159c-4.55 2.211-6.783 7.55-5.015 12.408 1.478 4.062 5.313 6.583 9.398 6.583 1.135 0 2.291-.195 3.419-.606l.893-.325 8.743 18.159c-4.55 2.212-6.783 7.55-5.014 12.408 1.478 4.062 5.313 6.583 9.398 6.583 1.135 0 2.29-.195 3.419-.605l.893-.325 8.743 18.159c-4.55 2.212-6.783 7.551-5.014 12.409 1.478 4.062 5.313 6.583 9.398 6.583 1.135 0 2.291-.195 3.419-.605l.893-.325 14.469 30.049c-1.836 3.272-2.859 6.996-2.863 10.853v18.756l-24.198 15.85c-6.332 4.142-10.117 11.127-10.124 18.695v30.889c0 12.325 10.028 22.353 22.354 22.353h43.789l17.26 29.896c3.982 6.927 11.387 11.234 19.334 11.241h109.502c30.756 0 57.72-16.515 72.512-41.138h49.996c12.326 0 22.354-10.027 22.354-22.353v-30.9c-.007-7.559-3.792-14.544-10.118-18.682l-24.204-15.854v-18.767c-.004-3.852-1.028-7.575-2.862-10.844l14.468-30.047.893.325c1.129.41 2.284.605 3.419.605 4.084 0 7.92-2.522 9.398-6.583 1.768-4.858-.464-10.196-5.014-12.408l8.743-18.159.893.325c1.129.41 2.284.605 3.419.605 4.084 0 7.92-2.522 9.398-6.583 1.768-4.858-.464-10.196-5.014-12.408l8.743-18.159.893.325c1.129.411 2.284.606 3.419.606 4.084 0 7.92-2.522 9.398-6.583 1.769-4.858-.465-10.197-5.015-12.408l8.744-18.16.893.325c1.129.41 2.284.605 3.419.605 4.084 0 7.92-2.522 9.398-6.583 1.769-4.858-.465-10.197-5.015-12.408l8.744-18.16 5.592 2.035c1.107.402 2.265.603 3.42.603 1.446 0 2.89-.313 4.226-.937 2.404-1.121 4.264-3.151 5.171-5.644l10.261-28.191c5.211-14.302-1.636-29.878-16.644-37.875zm-167.615 103.566c0 38.598-31.402 70-70 70s-70-31.402-70-70 31.402-70 70-70 70 31.402 70 70zm-243.538-63.142c-1.889-5.19-7.629-7.864-12.817-5.978l-42.273 15.386-6.84-18.794c-2.005-5.509 2.201-10.693 7.259-13.389l53.554-28.535c5.994-3.193 10.054-5.152 16.918-7.65 6.872-2.501 11.24-3.609 17.878-5.015l59.368-12.564c5.605-1.185 12.161.082 14.167 5.59l6.841 18.795-42.279 15.388c-5.189 1.89-7.866 7.628-5.977 12.817 1.889 5.19 7.625 7.867 12.817 5.977l27.196-9.899 4.961 19.478-135.22 49.216-8.72-18.11 27.19-9.896c5.19-1.889 7.865-7.627 5.977-12.817zm95.426 18.476c-4.385 7.639-7.678 15.978-9.674 24.805l-92.759 33.762-8.72-18.11zm-11.859 46.883c.17 6.977 1.136 13.759 2.813 20.259l-75.949 27.643-8.719-18.109zm9.952 38.946c3.174 6.146 7.038 11.879 11.485 17.102l-77.133 28.074-8.719-18.109zm28.127 32.33c3.7 2.62 7.608 4.965 11.69 7.012-2.774.594-5.411 1.707-7.795 3.318l-77.372 44.671-11.577-24.043zm85.581 206.413c-35.585 0-64.536-28.951-64.536-64.536s28.951-64.536 64.536-64.536 64.536 28.951 64.536 64.536-28.951 64.536-64.536 64.536zm-84.536-64.536c0 .582.032 1.157.044 1.736-2.1.477-4.252.728-6.395.728-15.908 0-28.85-12.942-28.85-28.85s12.942-28.851 28.85-28.851c7.805 0 15.116 3.116 20.472 8.528-8.913 13.393-14.121 29.452-14.121 46.709zm208.327-11.8c.993.649 1.071 1.67 1.071 1.957v30.889c0 1.297-1.056 2.353-2.354 2.353h-41.292c2.146-7.436 3.32-15.281 3.32-23.398 0-46.613-37.923-84.536-84.536-84.536-22.151 0-42.328 8.575-57.417 22.566-8.947-8.441-20.827-13.266-33.47-13.266-26.936 0-48.85 21.914-48.85 48.851 0 26.936 21.914 48.85 48.85 48.85 3.061 0 6.131-.313 9.151-.891 4.492 17.005 14.166 31.919 27.219 42.963h-54.977c-.808-.001-1.576-.464-2.013-1.225l-20.156-34.913c-1.787-3.094-5.088-5-8.661-5h-49.562c-1.298 0-2.354-1.056-2.354-2.353v-30.879c0-.297.079-1.317 1.077-1.971l28.724-18.814c2.821-1.848 4.521-4.993 4.521-8.365v-24.149c0-.635.318-1.494 1.225-2.016l85.357-49.281c.273-.157.539-.328.795-.511.4-.284.856-.429 1.357-.429h70.988c.5 0 .957.145 1.357.429.257.183.522.354.795.511l85.375 49.292c.889.511 1.207 1.37 1.208 1.994v24.16c0 3.372 1.7 6.518 4.521 8.365zm-32.11-75.076-77.372-44.672c-2.383-1.611-5.021-2.724-7.794-3.318 4.082-2.047 7.989-4.391 11.689-7.011l85.054 30.957zm20.298-42.155-77.133-28.074c4.447-5.223 8.311-10.956 11.485-17.102l74.367 27.067zm17.439-36.22-75.948-27.643c1.677-6.5 2.644-13.283 2.813-20.259l81.855 29.793zm17.439-36.218-92.759-33.762c-1.996-8.827-5.289-17.167-9.674-24.805l111.153 40.457zm17.44-36.219-135.221-49.218 4.961-19.478 138.98 50.585zm37.483-50.209-6.84 18.794-169.145-61.564 6.84-18.795c2.005-5.508 8.561-6.774 14.167-5.59l59.369 12.564c6.637 1.404 11.005 2.513 17.878 5.015 6.864 2.498 10.924 4.457 16.917 7.649l53.555 28.537c5.058 2.696 9.264 7.881 7.259 13.39z",fill:"#faed26"}),Object(p.jsx)("path",{d:"m255.992 226.092c22.056 0 40-17.944 40-40s-17.944-40-40-40-40 17.944-40 40 17.944 40 40 40zm0-60c11.028 0 20 8.972 20 20s-8.972 20-20 20-20-8.972-20-20 8.971-20 20-20z",fill:"#faed26"}),Object(p.jsx)("path",{d:"m303.779 391.462h-28.2c-5.523 0-10 4.478-10 10s4.477 10 10 10h28.2c5.523 0 10-4.478 10-10s-4.477-10-10-10z",fill:"#faed26"}),Object(p.jsx)("path",{d:"m115.356 120.974c5.523 0 10-4.478 10-10s-4.477-10-10-10h-.007c-5.523 0-9.996 4.478-9.996 10s4.48 10 10.003 10z",fill:"#faed26"})]})})})})}c(91);function he(e){var t=e.children,c=e.isOpen,n=e.setOpenModal;return Object(p.jsx)("div",{className:!0===c?"modal modal_active":"modal",children:Object(p.jsxs)("div",{className:"modal__container",children:[t,Object(p.jsx)("button",{className:"modal__close",type:"button",onClick:function(){return n(!1)},children:"\xd7"})]})})}var Oe=c(28),pe=function(){var e=Object(C.a)(w.a.mark((function e(t,c){var n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post("api/user/registration",{email:t,password:c});case 2:return n=e.sent,(s=n.data)&&s.token&&localStorage.setItem("token",s.token),e.abrupt("return",Object(Oe.a)(s.token));case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),xe=function(){var e=Object(C.a)(w.a.mark((function e(t,c){var n,s;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.post("api/user/login",{email:t,password:c});case 2:return n=e.sent,(s=n.data)&&s.token&&localStorage.setItem("token",s.token),e.abrupt("return",Object(Oe.a)(s.token));case 6:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),ve=function(){var e=Object(C.a)(w.a.mark((function e(){var t,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("api/user/auth");case 2:return t=e.sent,(c=t.data)&&c.token&&localStorage.setItem("token",c.token),e.abrupt("return",Object(Oe.a)(c.token));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c(92);var me=function(e){var t=e.setOpenModal,c=Object(n.useState)("login"),s=Object(l.a)(c,2),i=s[0],a=s[1],r=Object(n.useState)(""),o=Object(l.a)(r,2),u=o[0],j=o[1],d=Object(n.useState)(""),b=Object(l.a)(d,2),h=b[0],O=b[1],x=Object(n.useState)(!1),v=Object(l.a)(x,2),m=v[0],f=v[1],_=Object(n.useContext)(K).user,k=function(){var e=Object(C.a)(w.a.mark((function e(c){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),e.prev=1,"login"!==i){e.next=8;break}return e.next=5,xe(u,h);case 5:n=e.sent,e.next=12;break;case 8:if(!m){e.next=12;break}return e.next=11,pe(u,h);case 11:n=e.sent;case 12:n&&(c.target.reset(),_.setUser(n),_.setIsAuth(!0),t(!1)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0.message||e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h3",{children:"login"===i?"\u0412\u043e\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(p.jsxs)("form",{id:"auth",name:"auth",className:"auth",onSubmit:k,children:[Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("label",{htmlFor:"email",children:"Email:"}),Object(p.jsx)("input",{type:"email",id:"email",required:!0,name:"email",onBlur:function(e){return j(e.target.value)}})]}),Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("label",{htmlFor:"pass",children:"Password:"}),Object(p.jsx)("input",{type:"password",id:"pass",required:!0,name:"password",onBlur:function(e){return O(e.target.value)}})]}),"reg"===i&&Object(p.jsxs)("fieldset",{children:[Object(p.jsx)("label",{htmlFor:"confirmPass",children:"Confirm password:"}),Object(p.jsx)("input",{type:"password",id:"confirmPass",name:"confirmPass",onBlur:function(e){return f(h===e.target.value)}}),!m&&h&&Object(p.jsx)("p",{className:"auth__helptext",children:"\u041f\u0430\u0440\u043e\u043b\u044c \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u0435\u0442"})]}),Object(p.jsxs)("div",{className:"auth__footer",children:[Object(p.jsxs)(p.Fragment,{children:["login"===i?"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?":"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",Object(p.jsx)("a",{href:"#noscroll",onClick:function(e){e.preventDefault(),a("login"===i?"reg":"login")},children:"login"===i?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0441\u044f":"\u0412\u043e\u0439\u0434\u0438"})]}),Object(p.jsx)("button",{type:"submit",children:"login"===i?"\u0412\u043e\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]})]})};c(93);var fe=function(e){var t=e.title,c=e.text,n=e.ok,s=void 0===n?"":n,i=e.cancel,a=void 0===i?"Cancel":i,r=e.closeModal;return Object(p.jsxs)("div",{className:"message",children:[Object(p.jsx)("div",{className:"message__header",children:Object(p.jsx)("h4",{children:t})}),Object(p.jsx)("div",{className:"message__body",children:Object(p.jsx)("p",{children:c})}),s&&Object(p.jsxs)("div",{className:"message__footer",children:[Object(p.jsx)("button",{type:"button",onClick:function(){return r(s)},children:s}),a&&Object(p.jsx)("button",{type:"button",onClick:function(){return r(a)},children:a})]})]})},_e=Object(k.a)((function(){var e=Object(n.useContext)(K).user,t=Object(n.useContext)(_).devices;Object(n.useEffect)((function(){ve().then((function(t){e.setUser(t),e.setIsAuth(!0)})),M().then((function(e){var c={};e.forEach((function(e){c[e.id]=e})),t.setAllDevices(c)}))}),[]);var c=Object(n.useState)(!1),s=Object(l.a)(c,2),i=s[0],a=s[1],r=Object(n.useState)(""),u=Object(l.a)(r,2),j=u[0],d=u[1],b=Object(n.useState)({}),h=Object(l.a)(b,2),O=h[0],x=h[1],v=Object(n.useState)(""),m=Object(l.a)(v,2),f=m[0],k=m[1],g=e.isAdmin,y=function(e){d(e),a(!0)};return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsxs)(U.Provider,{value:{basket:new L},children:[Object(p.jsx)(de,{openLogin:y}),Object(p.jsx)(N.Provider,{value:{isOpenModal:i,openModal:y,setMessage:x,dialogResult:f,setOpenModal:a},children:Object(p.jsx)("main",{children:Object(p.jsxs)(o.d,{children:[ae.map((function(e,t){return Object(p.jsx)(o.b,{path:e.path,component:e.component,exact:!0},t)})),g&&re.map((function(e,t){return Object(p.jsx)(o.b,{path:e.path,component:e.component},t+100)})),Object(p.jsx)(o.a,{to:"/"})]})})})]}),Object(p.jsxs)(he,{isOpen:i,setOpenModal:a,children:["login"===j&&Object(p.jsx)(me,{setOpenModal:a}),"mess"===j&&Object(p.jsx)(fe,{title:O.title,text:O.text,ok:O.ok,cancel:O.cancel,closeModal:function(e){a(!1),k(e),x(O)}}),"device"===j&&Object(p.jsx)(se,{setOpenModal:a})]})]})})),ke=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,107)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),i(e),a(e)}))};a.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(r.a,{children:Object(p.jsx)(K.Provider,{value:{user:new q},children:Object(p.jsx)(_.Provider,{value:{devices:new f},children:Object(p.jsx)(_e,{})})})})}),document.getElementById("root")),ke()}},[[95,1,2]]]);
//# sourceMappingURL=main.57f38dcc.chunk.js.map